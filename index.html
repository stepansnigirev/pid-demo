<!DOCTYPE html>
<html>
<head>
	<title>PID demo page</title>
	<link rel="stylesheet" href="style.css">

	<script src="highcharts.js"></script>
	<script src="pid.js"></script>
</head>
<body>
<script type="text/javascript">
var common = {
	tset: 200,
	q_in: 4000,
	c_heat: 3,
	c_det: 3,
	t_room: 20,
	kappa_int: 30,
	kappa_ext: 1,
	dt: 0.000001,
	t: 3,
	t_sample: 0.001,
}
</script>

<div class="container">
	<h1>PID demo</h1>
	<h2>Basics</h2>
	<p>
		A simple example: a piece of metal that we want to heat to certain temperature and keep it at that temperature. People usually demonstrate how PID works with a car model, but I don't have driving licence, so I will describe something that I have experience with.
	</p>
	<p>
		Imagine we have a piece that we want to heat. We plug a thermocouple to it, wrap it with a heating tape, plug this heating tape via relay to the power and plug our controller to this relay so we can switch heating on and off. And let's say we want to heat it to <b>200°C</b>.
	</p>
	<h3>Relay behaviour</h3>
	<p>
		The most simple thing that you can try is to heat if the temperature is below your setpoint and switch heating off if we are above the setpoint. Makes sence, but let's see how it will look like:
	</p>
	<div id="relay-pid" class="pid">
	</div>
	<script type="text/javascript">
		relayPID = PID({
			element: "relay-pid",
			tset: common.tset,
			mode: "relay",
			system: Bulk({
				q_in: common.q_in, // heat that we get from the heating tape
				c_heat: common.c_heat, // heat capacitance of the heating region
				c_det: common.c_det, // heat capacitance of the detection region
				t_heat: common.t_room, // temperature of the heating region
				t_det: common.t_room, // temperature of the detection region
				kappa_int: common.kappa_int, // heat conductivity within a bulk
				kappa_ext: common.kappa_ext, // heat conductivity to external bath
				t_ext: common.t_room,	// external temperature
				dt: common.dt, // simulating step
				t_sample: common.t_sample,
			}),
			dt: common.dt, // time step
			t: common.t, // detection step
		});
	</script>
	<p>
		You see that there is a huge overheat in the beginning and some oscillations in the temperature that damping with time. In this model we could switch the relay very fast, but in reality switching is limited by the physical implementation of the relay. Taking into account that we can switch with some time resolution, we will end up with this:
	</p>
	<div id="relay-pid2" class="pid">
	</div>
	<script type="text/javascript">
		relayPID = PID({
			element: "relay-pid2",
			tset: common.tset,
			mode: "relay",
			system: Bulk({
				q_in: common.q_in, // heat that we get from the heating tape
				c_heat: common.c_heat, // heat capacitance of the heating region
				c_det: common.c_det, // heat capacitance of the detection region
				t_heat: common.t_room, // temperature of the heating region
				t_det: common.t_room, // temperature of the detection region
				kappa_int: common.kappa_int, // heat conductivity within a bulk
				kappa_ext: common.kappa_ext, // heat conductivity to external bath
				t_ext: common.t_room,	// external temperature
				dt: common.dt, // simulating step
				t_sample: common.t_sample,
			}),
			dt: 1/60, // time step
			t: common.t, // detection step
		});
	</script>
	<p>
		Here situation is even worse — we get constant oscillations in temperature that never dissapear. Funny thing is that switching time of the relay here is just 1 second, and oscillations are much larger — about 10-20 seconds. We can do better.
	</p>
	<h3>P-controller</h3>
	<h3>PI-controller</h3>
	<h3>PID-controller</h3>
	<h3>Ramping</h3>
	<h2>Digital PID control</h2>
	<h3>Limited output and Integral part</h3>
	<h3>Digitalization</h3>

	<h3>Filtering the data</h3>
	<h4>Mean filter</h4>
	<h4>Exponential mean filter</h4>
	<h4>Kalman filter</h4>

	<h3>Noize and Differential part</h3>

	<h2>Autotuning</h2>
	<h3>Autotuning algorithms</h3>
	<h3>Autotuning with noize</h3>
</div>


</body>
</html>